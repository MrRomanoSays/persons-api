# Getting Started

```
$ git clone https://github.com/MrRomanoSays/persons-api.git
$ cd persons-api  
$ npm install
$ npm start
```

### Quick Links
[Read a doc](#read-a-document)  
[Create a doc](#create-a-document)  
[Delete a doc](#delete-a-document)  
[Update a doc](#update-a-document)  
[Status Code Guide](#troubleshooting-status-code-messages)  


## Endpoints

### READ A DOCUMENT

**`GET /persons/:id`** will [*"fetch"*]("https://pouchdb.com/api.html#fetch_document") a specific person from the database according to a unique "\_id key".

The following route parameters may be utilized:

**:id**   -   *Each document's unique identifier*  
**:firstName**   -   *The First Name associated with the document*  
**:lastName**   -   *The Last Name associated with the document*  
**:email**   -   *The email address associated with the document*  
**:type**   -   *The type associated with the document.*  
* For documents at route `/persons`, type is "person"  
* For documents at route `/addresses`, type could be "home", "vacation", or "gravesite".

**> Example Call:**

```
GET /persons/:id
EX: GET /persons/person_armstrong_lance_oops@gmail.com
```

**< Example Response:**
```
{
  "_id": "person_armstrong_lance_oops@gmail.com",
  "_rev": "2-a609c2a0185c4f47c17d872e00f32957",
  "firstName": "Lance",
  "lastName": "Armstrong",
  "email": "oops@gmail.com",
  "type": "person"
}
```
-------------------

### CREATE A DOCUMENT

**`post /persons`** will create, or  [*"put"*]("https://pouchdb.com/api.html#create_document"), a new person in the database using the entry's unique *"id key"*.  The document is passed specific details within the **body** of your request.  This should be made using JSON.

**> Example Call:**

```
POST /persons
EX: POST /persons
```
*Common Error:  Notice that an id is not provided after /persons*


> MESSAGE BODY

```
{
  "_id": "person_NewPersonFirstName_NewPersonLastName_NewPersonEmailAddress@gmail.com",
  "firstName": "NewPersonFirstName",
  "lastName": "NewPersonLastName",
  "email": "NewPersonEmailAddress@gmail.com",
  "type": "person"
}
```
*Common Error:  Notice there is not a rev key.  Since this is the creation of the document it does not exist.  It will be automatically generated by the database for future reference.*

**< Example Response:**
```
{
  "ok": true,
  "id": "person_NewPersonFirstName_NewPersonLastName_NewPersonEmailAddress@gmail.com",
  "rev": "1-e41a046293bbc20e9cb3bed7a5d40051"
}
```

-------------------

### DELETE A DOCUMENT

**`delete /persons/:id`** will delete, or  [*"remove"*]("https://pouchdb.com/api.html#delete_document"), a person in the database using their unique *"id key"* and the document's latest *"rev key"*.

**> Example Call:**

```
DELETE /persons/:id
DELETE /persons/person_NewPersonFirstName_NewPersonLastName_NewPersonEmailAddress@gmail.com
```

**< Example Response:**
```
{
  "ok": true,
  "id": "person_NewPersonFirstName_NewPersonLastName_NewPersonEmailAddress@gmail.com",
  "rev": "2-91689fb6eae278e6e13c477a74ba10d8"
}
```

-------------------

### UPDATE A DOCUMENT

**`put /persons/:id`** will update a database record using  [*"put"*]("https://pouchdb.com/api.html#create_document").  The put relies on the document's unique *"id key"* and the most recent *"rev key"*.  The update itself is provided within the **body** of your request.  This should be made using JSON.

**> Example Call:**

```
PUT /persons/:id
EX: /persons/person_seinfeld_elaine_elaine@gmail.com
```

> MESSAGE BODY
```
{
  "_id": "person_seinfeld_elaine_elaine@gmail.com",
  "_rev": "1-a5a789e9e1f3e563fb35f2b1afda4c72",
  "firstName": "Elaine",
  "lastName": "Bennis-Seinfeld",  //CHANGE MADE TO THIS VALUE
  "email": "elaine@gmail.com",
  "type": "person"
}
```
*Common Error:  Ensure that the `_rev` value is the most current version of the document.*


**< Example Response:**
```
{
  "ok": true,
  "id": "person_seinfeld_elaine_elaine@gmail.com",
  "rev": "2-cdc4f430df9b38c7e6ee2dcbea520d1c"  //NEW REVISION VALUE GENERATED REFLECTING UPDATE
}
```
-------------------

### TROUBLESHOOTING STATUS CODE MESSAGES  

200 - Successful action  
201 - Created new document  
407 - Conflict in database  
404 -
